# ä¼ä¸šAIéœ€æ±‚å¯¹æ¥å¹³å° - æƒé™ç³»ç»Ÿè®¾è®¡

## ğŸ“‹ è§’è‰²å®šä¹‰

### 1. ç®¡ç†å‘˜ (ADMIN)
- **ç”¨æˆ·ç±»å‹**: å¹³å°ç®¡ç†å‘˜
- **æƒé™èŒƒå›´**: å…¨å±€
- **ä¸»è¦èŒè´£**: ç³»ç»Ÿç®¡ç†ã€å®¡æ ¸ã€ç›‘æ§

### 2. éœ€æ±‚æ–¹ (DEMAND)
- **ç”¨æˆ·ç±»å‹**: éœ€æ±‚ä¼ä¸šç”¨æˆ·
- **æƒé™èŒƒå›´**: è‡ªå·±çš„éœ€æ±‚å’ŒåŒ¹é…çš„ä¾›åº”å•†
- **ä¸»è¦èŒè´£**: å‘å¸ƒéœ€æ±‚ã€æŸ¥çœ‹åŒ¹é…ç»“æœ

### 3. ä¾›åº”æ–¹ (SUPPLY)
- **ç”¨æˆ·ç±»å‹**: ä¾›åº”ä¼ä¸šç”¨æˆ·
- **æƒé™èŒƒå›´**: éœ€æ±‚ä¿¡æ¯å’ŒåŒ¹é…çš„éœ€æ±‚ä¼ä¸š
- **ä¸»è¦èŒè´£**: æŸ¥çœ‹éœ€æ±‚ã€å“åº”åŒ¹é…

---

## ğŸ” æƒé™çŸ©é˜µ

| åŠŸèƒ½æ¨¡å— | ç®¡ç†å‘˜ | éœ€æ±‚æ–¹ | ä¾›åº”æ–¹ |
|---------|-------|-------|-------|
| **ç”¨æˆ·ç®¡ç†** |
| æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ· | âœ… | âŒ | âŒ |
| æŸ¥çœ‹è‡ªå·±ä¿¡æ¯ | âœ… | âœ… | âœ… |
| ä¿®æ”¹è‡ªå·±ä¿¡æ¯ | âœ… | âœ… | âœ… |
| **ä¼ä¸šç®¡ç†** |
| æŸ¥çœ‹æ‰€æœ‰ä¼ä¸š | âœ… | âŒ | âŒ |
| æŸ¥çœ‹è‡ªå·±ä¼ä¸š | âœ… | âœ… | âœ… |
| æŸ¥çœ‹åŒ¹é…çš„ä¼ä¸š | âœ… | âœ… (ä¾›åº”å•†) | âœ… (éœ€æ±‚æ–¹) |
| æŸ¥çœ‹å…¶ä»–éœ€æ±‚æ–¹ | âœ… | âŒ | âŒ |
| æŸ¥çœ‹å…¶ä»–ä¾›åº”æ–¹ | âœ… | âŒ | âŒ |
| ä¿®æ”¹ä¼ä¸šä¿¡æ¯ | âœ… | âœ… (è‡ªå·±) | âœ… (è‡ªå·±) |
| å®¡æ ¸ä¼ä¸šèµ„è´¨ | âœ… | âŒ | âŒ |
| **éœ€æ±‚ç®¡ç†** |
| æŸ¥çœ‹æ‰€æœ‰éœ€æ±‚ | âœ… | âŒ | âœ… |
| æŸ¥çœ‹è‡ªå·±çš„éœ€æ±‚ | âœ… | âœ… | âŒ |
| åˆ›å»ºéœ€æ±‚ | âœ… | âœ… | âŒ |
| ä¿®æ”¹éœ€æ±‚ | âœ… | âœ… (è‡ªå·±) | âŒ |
| åˆ é™¤éœ€æ±‚ | âœ… | âœ… (è‡ªå·±) | âŒ |
| å®¡æ ¸éœ€æ±‚ | âœ… | âŒ | âŒ |
| **åŒ¹é…æ¨è** |
| æŸ¥çœ‹æ‰€æœ‰åŒ¹é… | âœ… | âŒ | âŒ |
| æŸ¥çœ‹è‡ªå·±éœ€æ±‚çš„åŒ¹é… | âœ… | âœ… | âŒ |
| æŸ¥çœ‹æ¨èçš„éœ€æ±‚ | âœ… | âŒ | âœ… |
| æ‰‹åŠ¨è§¦å‘åŒ¹é… | âœ… | âœ… (è‡ªå·±) | âŒ |
| **ç»Ÿè®¡åˆ†æ** |
| å¹³å°æ€»è§ˆ | âœ… | âŒ | âŒ |
| ä¸ªäººæ•°æ®ç»Ÿè®¡ | âœ… | âœ… | âœ… |

---

## ğŸ“Š æ•°æ®è®¿é—®è§„åˆ™

### éœ€æ±‚æ•°æ®
```python
# ç®¡ç†å‘˜ï¼šå¯ä»¥çœ‹åˆ°æ‰€æœ‰éœ€æ±‚
demands = Demand.query.all()

# éœ€æ±‚æ–¹ï¼šåªèƒ½çœ‹åˆ°è‡ªå·±ä¼ä¸šåˆ›å»ºçš„éœ€æ±‚
demands = Demand.query.filter_by(enterprise_id=user.enterprise_id).all()

# ä¾›åº”æ–¹ï¼šå¯ä»¥çœ‹åˆ°æ‰€æœ‰å·²å‘å¸ƒçš„éœ€æ±‚ï¼ˆéšè—éœ€æ±‚æ–¹ä¼ä¸šæ•æ„Ÿä¿¡æ¯ï¼‰
demands = Demand.query.filter_by(status='published').all()
```

### ä¼ä¸šæ•°æ®
```python
# ç®¡ç†å‘˜ï¼šå¯ä»¥çœ‹åˆ°æ‰€æœ‰ä¼ä¸š
enterprises = Enterprise.query.all()

# éœ€æ±‚æ–¹ï¼šåªèƒ½çœ‹åˆ°è‡ªå·±çš„ä¼ä¸š + åŒ¹é…æ¨èçš„ä¾›åº”å•†ä¼ä¸š
own_enterprise = Enterprise.query.get(user.enterprise_id)
matched_suppliers = [è·å–åŒ¹é…çš„ä¾›åº”å•†IDåˆ—è¡¨]
enterprises = Enterprise.query.filter(
    or_(
        Enterprise.id == user.enterprise_id,
        Enterprise.id.in_(matched_suppliers)
    )
).all()

# ä¾›åº”æ–¹ï¼šåªèƒ½çœ‹åˆ°è‡ªå·±çš„ä¼ä¸š + åŒ¹é…æ¨èçš„éœ€æ±‚æ–¹ä¼ä¸š
own_enterprise = Enterprise.query.get(user.enterprise_id)
matched_demands = [è·å–åŒ¹é…çš„éœ€æ±‚æ–¹IDåˆ—è¡¨]
enterprises = Enterprise.query.filter(
    or_(
        Enterprise.id == user.enterprise_id,
        Enterprise.id.in_(matched_demands)
    )
).all()
```

### åŒ¹é…æ•°æ®
```python
# ç®¡ç†å‘˜ï¼šå¯ä»¥çœ‹åˆ°æ‰€æœ‰åŒ¹é…è®°å½•
recommendations = Recommendation.query.all()

# éœ€æ±‚æ–¹ï¼šåªèƒ½çœ‹åˆ°è‡ªå·±éœ€æ±‚çš„åŒ¹é…ç»“æœ
recommendations = Recommendation.query.filter(
    Recommendation.demand_id.in_(
        [d.id for d in user.enterprise.demands]
    )
).all()

# ä¾›åº”æ–¹ï¼šåªèƒ½çœ‹åˆ°æ¨èç»™è‡ªå·±çš„éœ€æ±‚
recommendations = Recommendation.query.filter_by(
    enterprise_id=user.enterprise_id
).all()
```

---

## ğŸ¨ å‰ç«¯èœå•é…ç½®

### ç®¡ç†å‘˜èœå•
```javascript
[
  { key: '/', icon: <DashboardOutlined />, label: 'å·¥ä½œå°' },
  { key: '/enterprises', icon: <BankOutlined />, label: 'ä¼ä¸šç®¡ç†' },
  { key: '/demands', icon: <FileTextOutlined />, label: 'éœ€æ±‚ç®¡ç†' },
  { key: '/recommendations', icon: <RocketOutlined />, label: 'åŒ¹é…ç®¡ç†' },
  { key: '/users', icon: <TeamOutlined />, label: 'ç”¨æˆ·ç®¡ç†' },
  { key: '/statistics', icon: <BarChartOutlined />, label: 'ç»Ÿè®¡åˆ†æ' }
]
```

### éœ€æ±‚æ–¹èœå•
```javascript
[
  { key: '/', icon: <DashboardOutlined />, label: 'æˆ‘çš„å·¥ä½œå°' },
  { key: '/qualification', icon: <SafetyCertificateOutlined />, label: 'ä¼ä¸šèµ„è´¨' },
  { key: '/demands', icon: <FileTextOutlined />, label: 'æˆ‘çš„éœ€æ±‚' },
  { key: '/demands/create', icon: <PlusOutlined />, label: 'å‘å¸ƒéœ€æ±‚' },
  { key: '/matched-suppliers', icon: <RocketOutlined />, label: 'æ¨èä¾›åº”å•†' },
  { key: '/profile', icon: <UserOutlined />, label: 'ä¸ªäººä¿¡æ¯' }
]
```

### ä¾›åº”æ–¹èœå•
```javascript
[
  { key: '/', icon: <DashboardOutlined />, label: 'æˆ‘çš„å·¥ä½œå°' },
  { key: '/supplier-register', icon: <SafetyCertificateOutlined />, label: 'ä¼ä¸šèµ„è´¨' },
  { key: '/supplier-home', icon: <HomeOutlined />, label: 'ä¼ä¸šä¸»é¡µ' },
  { key: '/recommended-demands', icon: <RocketOutlined />, label: 'æ¨èéœ€æ±‚' },
  { key: '/matched-clients', icon: <TeamOutlined />, label: 'åŒ¹é…å®¢æˆ·' },
  { key: '/profile', icon: <UserOutlined />, label: 'ä¸ªäººä¿¡æ¯' }
]
```

---

## ğŸ”§ å®ç°è¦ç‚¹

### 1. åç«¯æƒé™æ§åˆ¶
- âœ… åœ¨Useræ¨¡å‹æ·»åŠ `role`å­—æ®µ
- âœ… å®ç°æƒé™è£…é¥°å™¨ `@require_role()`
- âœ… æ¯ä¸ªAPIç«¯ç‚¹æ·»åŠ æƒé™æ£€æŸ¥
- âœ… æ•°æ®æŸ¥è¯¢æ·»åŠ è§’è‰²è¿‡æ»¤

### 2. å‰ç«¯æƒé™æ§åˆ¶
- âœ… æ ¹æ®è§’è‰²åŠ¨æ€æ¸²æŸ“èœå•
- âœ… è·¯ç”±å®ˆå«æ£€æŸ¥è®¿é—®æƒé™
- âœ… ç»„ä»¶çº§åˆ«çš„æƒé™æ§åˆ¶
- âœ… æ•æ„Ÿä¿¡æ¯çš„æ¡ä»¶æ¸²æŸ“

### 3. æ•°æ®éš”ç¦»
- âœ… éœ€æ±‚æ–¹çœ‹ä¸åˆ°å…¶ä»–éœ€æ±‚æ–¹ä¿¡æ¯
- âœ… ä¾›åº”æ–¹çœ‹ä¸åˆ°å…¶ä»–ä¾›åº”æ–¹ä¿¡æ¯
- âœ… åŒ¹é…åæ‰èƒ½çœ‹åˆ°å¯¹æ–¹è¯¦ç»†ä¿¡æ¯
- âœ… æœªåŒ¹é…çš„ä¼ä¸šä¿¡æ¯å®Œå…¨éšè—

---

## ğŸš€ å®æ–½æ­¥éª¤

1. **æ•°æ®åº“æ›´æ–°** - æ·»åŠ roleå­—æ®µï¼Œè¿ç§»ç°æœ‰æ•°æ®
2. **åç«¯æƒé™å±‚** - å®ç°è£…é¥°å™¨å’Œä¸­é—´ä»¶
3. **APIç«¯ç‚¹æ›´æ–°** - æ‰€æœ‰æ¥å£æ·»åŠ æƒé™æ§åˆ¶
4. **å‰ç«¯è·¯ç”±æ”¹é€ ** - åŠ¨æ€èœå•å’Œè·¯ç”±å®ˆå«
5. **UIç»„ä»¶è°ƒæ•´** - æ¡ä»¶æ¸²æŸ“å’Œæƒé™æ˜¾ç¤º
6. **æµ‹è¯•éªŒè¯** - å®Œæ•´çš„æƒé™éš”ç¦»æµ‹è¯•

---

**è®¾è®¡ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-11-03
